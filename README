
See:
   http://www.zigamorph.net/timps/


=== COMPILING ===

To compile:
  ./gen ; ./configure ; make
You'll need libtool, automake, and autoconf, of course.  You'll need ncurses
(including headers) installed to compile the nafconsole plugin, which you'll
find very helpful in debugging.


=== RUNNING ===

For development, I run it something like this:
   timps/timpsd -c ~/timps.conf -d -D -M modules/nafconsole/.libs/libnafconsole.so
All messages will go to the log file specified in the config (see below), and
you will be given a "timps>" prompt (thanks to nafconsole).  From this
prompt, you can make RPC calls.  Try "call rpc->help()", for example.  The
most helpful right now is probably "call gnr->listnodes()" which will show
you the users currently online.

To run it as a daemon, use the much simpler:
   timpsd -c /etc/timps.conf
And it will fork and detach from the terminal into the background.  Note that
the config file path must be absolute, since daemonizing loses the current
working directory.

To use with AIM, change your client's authorizer, which is normally set to
login.oscar.aol.com:5190, to point to the machine running timps, and the port
that timps-oscar is configured for (see [module=conn] section of the config
file).  If the machine that timps is running on has a different IP than it
knows about (because of NAT, etc), add an 'extipaddr' line to the [module=conn]
section, so that it can tell clients to connect back in the right place.


=== OFF-THE-RECORD MESSAGING ===

If you want to use the OTR module, you will need to install libotr and all of
its dependencies.  Get that from here:  http://www.cypherpunks.ca/otr/

The timps-otr module is not compiled by default.  Once you build the rest of
timps, go to modules/timpsotr and run make.

Add a [module=timps-otr] section to your timps.conf that contains at least the
keyfilepath parameter, as shown in the sample configuration.  (The directory
specified must be writable by timps.) Then, add: 
    -M modules/timpsotr/.libs/libtimpsotr.so
to your timpsd command line.  (You can have multiple -M options.)

If it doesn't seem to be working, make sure there are no errors near the
"loaded module timps-otr" line in the timps system log.  Depending on your
system, you may need to run something like /sbin/ldconfig, or add the location
of libotr.so to something like /etc/ld.so.conf.

WARNING: The OTR module is even more experimental/fragile than the rest of
timps!


=== SAMPLE CONFIGURATION ===

Configuration file suitable for development (all debugging on):

----- SNIP -----

[module=conn]
listenports=5190/timps-oscar
debug=10
; if the clients connect to the server on a different address than the server
; knows about, set this
;extipaddr=66.66.66.66

[module=timps]
debug=10

[module=timps-logging]
; prefixed to filenames below
logfilepath=/home/mid/tmp/timps
; admin log gets all messages and user (dis)connects
adminlogfile=timps-message.log
; this will create a log file for each local user in the path above, of the
; form 'logfilepath/timps-userlog.SERVICE.screenname'
enableperuserlogs=false

; for the OTR module
[module=timps-otr]
; where the private key and fingerprint store files will be created
keyfilepath=/home/mid/tmp/timps
debug=10

[module=timps-oscar]
debug=10
; if you're using aimdlite for testing
;authorizer=localhost:6190
; default is login.oscar.aol.com:5190

[module=logging]
; this is the low-level logging module (in NAF) -- it does not see IMs
logfilepath=/home/mid/tmp/timps
systemlogfile=timps-system.log

[module=gnr]
debug=10

----- /SNIP -----


